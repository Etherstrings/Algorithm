package Grid;

import java.util.ArrayList;
import java.util.List;

/**
 * @author wuboyu <wuboyu@kuaishou.com>
 * Created on 2023-12-07
 */
public class L1466 {
    //n åº§åŸå¸‚ï¼Œä» 0 åˆ° n-1 ç¼–å·ï¼Œå…¶é—´å…±æœ‰ n-1 æ¡è·¯çº¿ã€‚å› æ­¤ï¼Œè¦æƒ³åœ¨ä¸¤åº§ä¸åŒåŸå¸‚ä¹‹é—´æ—…è¡Œåªæœ‰å”¯ä¸€ä¸€æ¡è·¯çº¿å¯ä¾›é€‰æ‹©ï¼ˆè·¯çº¿ç½‘å½¢æˆä¸€é¢—æ ‘ï¼‰ã€‚å»å¹´ï¼Œäº¤é€šè¿è¾“
    //éƒ¨å†³å®šé‡æ–°è§„åˆ’è·¯çº¿ï¼Œä»¥æ”¹å˜äº¤é€šæ‹¥å µçš„çŠ¶å†µã€‚
    //
    // è·¯çº¿ç”¨ connections è¡¨ç¤ºï¼Œå…¶ä¸­ connections[i] = [a, b] è¡¨ç¤ºä»åŸå¸‚ a åˆ° b çš„ä¸€æ¡æœ‰å‘è·¯çº¿ã€‚
    //
    // ä»Šå¹´ï¼ŒåŸå¸‚ 0 å°†ä¼šä¸¾åŠä¸€åœºå¤§å‹æ¯”èµ›ï¼Œå¾ˆå¤šæ¸¸å®¢éƒ½æƒ³å‰å¾€åŸå¸‚ 0 ã€‚
    //
    // è¯·ä½ å¸®åŠ©é‡æ–°è§„åˆ’è·¯çº¿æ–¹å‘ï¼Œä½¿æ¯ä¸ªåŸå¸‚éƒ½å¯ä»¥è®¿é—®åŸå¸‚ 0 ã€‚è¿”å›éœ€è¦å˜æ›´æ–¹å‘çš„æœ€å°è·¯çº¿æ•°ã€‚
    //
    // é¢˜ç›®æ•°æ® ä¿è¯ æ¯ä¸ªåŸå¸‚åœ¨é‡æ–°è§„åˆ’è·¯çº¿æ–¹å‘åéƒ½èƒ½åˆ°è¾¾åŸå¸‚ 0 ã€‚
    //
    //
    //
    // ç¤ºä¾‹ 1ï¼š
    //
    //
    //
    // è¾“å…¥ï¼šn = 6, connections = [[0,1],[1,3],[2,3],[4,0],[4,5]]
    //è¾“å‡ºï¼š3
    //è§£é‡Šï¼šæ›´æ”¹ä»¥çº¢è‰²æ˜¾ç¤ºçš„è·¯çº¿çš„æ–¹å‘ï¼Œä½¿æ¯ä¸ªåŸå¸‚éƒ½å¯ä»¥åˆ°è¾¾åŸå¸‚ 0 ã€‚
    //
    // ç¤ºä¾‹ 2ï¼š
    //
    //
    //
    // è¾“å…¥ï¼šn = 5, connections = [[1,0],[1,2],[3,2],[3,4]]
    //è¾“å‡ºï¼š2
    //è§£é‡Šï¼šæ›´æ”¹ä»¥çº¢è‰²æ˜¾ç¤ºçš„è·¯çº¿çš„æ–¹å‘ï¼Œä½¿æ¯ä¸ªåŸå¸‚éƒ½å¯ä»¥åˆ°è¾¾åŸå¸‚ 0 ã€‚
    //
    // ç¤ºä¾‹ 3ï¼š
    //
    // è¾“å…¥ï¼šn = 3, connections = [[1,0],[2,0]]
    //è¾“å‡ºï¼š0
    //
    //
    //
    //
    // æç¤ºï¼š
    //
    //
    // 2 <= n <= 5 * 10^4
    // connections.length == n-1
    // connections[i].length == 2
    // 0 <= connections[i][0], connections[i][1] <= n-1
    // connections[i][0] != connections[i][1]
    //
    //
    // Related Topics æ·±åº¦ä¼˜å…ˆæœç´¢ å¹¿åº¦ä¼˜å…ˆæœç´¢ å›¾ ğŸ‘ 179 ğŸ‘ 0
    /**
     * æ—¢ç„¶æ˜¯æ ‘å½¢ç»“æ„,é‚£ä¹ˆ,æ‰€æœ‰çš„ç‚¹éƒ½æ˜¯è¿æ¥åœ¨ä¸€èµ·çš„,å°±å¯ä»¥æ„å»ºå›¾
     * æ ¹æ®é¢˜æ„,è¿™æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„æœ‰å‘æ— ç¯å›¾,å¦‚æœä¸æ˜¯æ ‘å½¢çš„,æ¯”å¦‚é¢˜ç›®å˜æˆäº†ä¿®è·¯ä¸”æ— å‘çš„è¯,å¹¶æŸ¥é›†å°±åˆé€‚äº†,å› ä¸ºå¯èƒ½å­˜åœ¨ä¸€ä¸ªå­¤ç«‹çš„åŸå¸‚,è·Ÿä»»ä½•åŸå¸‚å¯èƒ½éƒ½æ²¡å…³ç³»
     * å¦å¤–,è¿™ä¸ªè§£æ³•æ˜¯å»ºç«‹åœ¨æ ‘çš„ç»“æ„è¿™ä¸ªçº¦æŸæ¡ä»¶ä¸‹çš„,å¦‚æœæ˜¯çœŸæ­£çš„å›¾çš„è¯,å°±ä¸æ­£ç¡®äº†,å› ä¸ºå­˜åœ¨è¿™ä¹ˆä¸€ç§æƒ…å†µ,æ‰€æœ‰èŠ‚ç‚¹å…¶å®éƒ½å¯ä»¥åˆ°è¾¾åŸå¸‚0,ä½†æ˜¯åœ¨æ·±åº¦éå†çš„è¿‡ç¨‹ä¸­,
     * æœ‰å¯èƒ½æŸä¸ªè·¯å¾„æ˜¯åæ–¹å‘çš„,æ­¤æ—¶è®¡ç®—çš„ç»“æœä¸ä¼šæ˜¯0,ä½†çœŸæ­£æ­£ç¡®çš„ç­”æ¡ˆæ˜¯0
     * ç›¸å½“äºæ•´ä¸ªç®—æ³•çš„æ€ç»´æ˜¯é™ç»´çš„,ç”¨å›¾æ¥è§£å†³æ ‘çš„é—®é¢˜
     */

    //> 2023/12/07 17:01:30
    //è§£ç­”æˆåŠŸ:
    //	æ‰§è¡Œè€—æ—¶:39 ms,å‡»è´¥äº†57.51% çš„Javaç”¨æˆ·
    //	å†…å­˜æ¶ˆè€—:67.1 MB,å‡»è´¥äº†41.85% çš„Javaç”¨æˆ·

    //è¯´å®è¯ æ²¡æœ‰æ˜ç™½çš„å¾ˆæ¸…æ¥š
    public static void main(String[] args) {
        int[][] connections = new int[][]{{0, 1}, {1, 3}, {2, 3}, {4, 0}, {4, 5}};
        System.out.println(new L1466().minReorder(6, connections));
    }
    int ans;
    public int minReorder(int n, int[][] connections) {
        ans=0;
        List<List<Integer>> graph = new ArrayList<>();
        for (int i = 0; i < n; ++i) {
            graph.add(new ArrayList<>());
        }
        // æ— å‘å›¾
        for (int[] conn : connections) {
            graph.get(conn[0]).add(conn[1]);
            graph.get(conn[1]).add(-conn[0]);
        }
        dfs(graph, new boolean[n], 0);
        return ans;
    }

    public void dfs(List<List<Integer>> graph, boolean[] visited, int cur) {
        visited[cur] = true;
        for (int next : graph.get(cur)) {
            if (!visited[Math.abs(next)]) {
                if(next>0){
                    ans++;
                }
                dfs(graph, visited, Math.abs(next));
            }
        }
    }
}

