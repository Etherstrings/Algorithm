package TreeSet;

import java.util.Arrays;
import java.util.TreeSet;

/**
 * @author wuboyu <wuboyu@kuaishou.com>
 * Created on 2023-12-12
 */
public class L2454 {

    //ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„éè´Ÿæ•´æ•°æ•°ç»„ nums ã€‚å¯¹äº nums ä¸­æ¯ä¸€ä¸ªæ•´æ•°ï¼Œä½ å¿…é¡»æ‰¾åˆ°å¯¹åº”å…ƒç´ çš„ ç¬¬äºŒå¤§ æ•´æ•°ã€‚
    //
    // å¦‚æœ nums[j] æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°å®ƒä¸º nums[i] çš„ ç¬¬äºŒå¤§ æ•´æ•°ï¼š
    //
    //
    // j > i
    // nums[j] > nums[i]
    // æ°å¥½å­˜åœ¨ ä¸€ä¸ª k æ»¡è¶³ i < k < j ä¸” nums[k] > nums[i] ã€‚
    //
    //
    // å¦‚æœä¸å­˜åœ¨ nums[j] ï¼Œé‚£ä¹ˆç¬¬äºŒå¤§æ•´æ•°ä¸º -1 ã€‚
    //
    //
    // æ¯”æ–¹è¯´ï¼Œæ•°ç»„ [1, 2, 4, 3] ä¸­ï¼Œ1 çš„ç¬¬äºŒå¤§æ•´æ•°æ˜¯ 4 ï¼Œ2 çš„ç¬¬äºŒå¤§æ•´æ•°æ˜¯ 3 ï¼Œ3 å’Œ 4 çš„ç¬¬äºŒå¤§æ•´æ•°æ˜¯ -1 ã€‚
    //
    //
    // è¯·ä½ è¿”å›ä¸€ä¸ªæ•´æ•°æ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i]æ˜¯ nums[i] çš„ç¬¬äºŒå¤§æ•´æ•°ã€‚
    //
    //
    //
    // ç¤ºä¾‹ 1ï¼š
    //
    //
    //è¾“å…¥ï¼šnums = [2,4,0,9,6]
    //è¾“å‡ºï¼š[9,6,6,-1,-1]
    //è§£é‡Šï¼š
    //ä¸‹æ ‡ä¸º 0 å¤„ï¼š2 çš„å³è¾¹ï¼Œ4 æ˜¯å¤§äº 2 çš„ç¬¬ä¸€ä¸ªæ•´æ•°ï¼Œ9 æ˜¯ç¬¬äºŒä¸ªå¤§äº 2 çš„æ•´æ•°ã€‚
    //ä¸‹æ ‡ä¸º 1 å¤„ï¼š4 çš„å³è¾¹ï¼Œ9 æ˜¯å¤§äº 4 çš„ç¬¬ä¸€ä¸ªæ•´æ•°ï¼Œ6 æ˜¯ç¬¬äºŒä¸ªå¤§äº 4 çš„æ•´æ•°ã€‚
    //ä¸‹æ ‡ä¸º 2 å¤„ï¼š0 çš„å³è¾¹ï¼Œ9 æ˜¯å¤§äº 0 çš„ç¬¬ä¸€ä¸ªæ•´æ•°ï¼Œ6 æ˜¯ç¬¬äºŒä¸ªå¤§äº 0 çš„æ•´æ•°ã€‚
    //ä¸‹æ ‡ä¸º 3 å¤„ï¼šå³è¾¹ä¸å­˜åœ¨å¤§äº 9 çš„æ•´æ•°ï¼Œæ‰€ä»¥ç¬¬äºŒå¤§æ•´æ•°ä¸º -1 ã€‚
    //ä¸‹æ ‡ä¸º 4 å¤„ï¼šå³è¾¹ä¸å­˜åœ¨å¤§äº 6 çš„æ•´æ•°ï¼Œæ‰€ä»¥ç¬¬äºŒå¤§æ•´æ•°ä¸º -1 ã€‚
    //æ‰€ä»¥æˆ‘ä»¬è¿”å› [9,6,6,-1,-1] ã€‚
    //
    //
    // ç¤ºä¾‹ 2ï¼š
    //
    //
    //è¾“å…¥ï¼šnums = [3,3]
    //è¾“å‡ºï¼š[-1,-1]
    //è§£é‡Šï¼š
    //ç”±äºæ¯ä¸ªæ•°å³è¾¹éƒ½æ²¡æœ‰æ›´å¤§çš„æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› [-1,-1] ã€‚
    //
    //
    //
    //
    // æç¤ºï¼š
    //
    //
    // 1 <= nums.length <= 10âµ
    // 0 <= nums[i] <= 10â¹
    //
    //
    // Related Topics æ ˆ æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ æ’åº å•è°ƒæ ˆ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ ğŸ‘ 66 ğŸ‘ 0

    //> 2023/12/12 15:28:01
    //è§£ç­”æˆåŠŸ:
    //	æ‰§è¡Œè€—æ—¶:420 ms,å‡»è´¥äº†6.30% çš„Javaç”¨æˆ·
    //	å†…å­˜æ¶ˆè€—:64.5 MB,å‡»è´¥äº†5.51% çš„Javaç”¨æˆ·


    public int[] secondGreaterElement(int[] nums) {
        int[][] snums = new int[nums.length][2];
        int[] ans = new int[nums.length];
        for (int i = 0; i < nums.length; i++) {
            snums[i][0] = nums[i];
            snums[i][1] = i;
        }
        //æŒ‰ç…§snums[i][0]ä»å¤§åˆ°å°æ’åº
        Arrays.sort(snums, (a, b) -> b[0] - a[0]);
        //ç»´æŠ¤ä¸€ä¸ªå½“å‰å·²ç»éå†åˆ°çš„ç´¢å¼•ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°æ®ç»“æ„éœ€è¦æ’åºçš„
        TreeSet<Integer> ts = new TreeSet<>();
        for(int[] temp : snums) {
            int index = temp[1];
            //æ‰¾åˆ°å½“å‰ç´¢å¼•çš„ä¸‹ä¸€ä¸ªç´¢å¼•
            Integer next = ts.higher(index);
            if(next != null && ts.higher(next)!= null) {
                ans[index] = nums[ts.higher(next)];
            } else {
                ans[index] = -1;
            }
            ts.add(index);
        }
        return ans;
    }
}
